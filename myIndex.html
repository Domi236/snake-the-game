<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>snake-the-game</title>
</head>
<style>
    html {
        width: 100%;
        height: 100%;
        padding: 0;
        margin: 0;
    }
    #canvas {
        background:#c7a384;
        border: 10px solid black;
		margin-left: 5%;
		margin-top: 2%;
    }
	.headline {
		position: absolute;
		right: 7%;
		top: 0;
		width: auto;
		height: auto;
		font-size: 40px;
		text-align: center;
	}
	#speed {
		position: absolute;
		right: 10%;
		top: 12%;
		width: 220px;
		height: auto;
		font-size: 40px;
		padding: 20px;
		border-radius: 10px;
	}
	#walls {
		position: absolute;
		right: 2%;
		top: 22%;
		width: 440px;
		height: auto;
		font-size: 40px;
		padding: 20px;
		border-radius: 10px;
	}

</style>
<body>
	<div>
		<canvas id="canvas" width="1300" height="800"></canvas>
	</div>

	<!-- <h4 class="headline">Select your options:</h4>
	<select id="speed" onchange="changeSpeed()">
		<option value="300">easy</option>
		<option value="200">medium</option>
		<option value="100">hard</option>
	</select>-->
	<select id="walls" onchange="changeWall()">
		<option value="false">don't touch the walls</option>
		<option value="true">go throw the walls</option>
	</select>
	<button id="startBtn">Start</button> 

<script>
	var canvas = document.getElementById('canvas');
	var ctx = canvas.getContext('2d');
	var keys = [];
	var key = 'right';
	var score = 0;
	var balls;
	var food;
	var foodFirstPoint = 50;
	var foodSecondPoint = 100;
	var speed = 200;
	var start = false;

	var foodArrayWidth = [50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550, 600, 650, 700, 750, 800, 850, 900,950, 1000, 1050, 1100, 1150, 1200];
	var foodArrayHeight = [50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550, 600, 650, 700];

	var foodx = foodArrayWidth[Math.floor(Math.random() * foodArrayWidth.length)];
	var foody = foodArrayHeight[Math.floor(Math.random() * foodArrayHeight.length)];

	var snakeFoodxOne = foodFirstPoint + foodx;
	var snakeFoodxTwo = foodSecondPoint + foodx;
	var snakeFoodyOne = foodSecondPoint + foody;
	var snakeFoodyTwo = foodFirstPoint + foody;

	function init(){
		key = 'right';
		score = 0;
		balls = [
			{x:50, y:50},
			{x:100, y:50},
			{x:150, y:50}
		];
		createFood();
	}

	init();
	
    document.addEventListener('keydown', function(e){
        var keyCode = e.keyCode;
        if(keyCode == 37 && key != 'right'){
            key = 'left';
        } 
        if(keyCode == 38 && key != 'down'){
            key = 'up';
        }
        if(keyCode == 39 && key != 'left'){
            key = 'right';
        }
        if(keyCode == 40 && key != 'up'){
            key = 'down';
        } 
    });

    document.addEventListener("keydown", keysPressed, false);
    document.addEventListener("keydown", keysReleased, false);

    function keysPressed(e) {
        // store an entry for every key pressed
        keys[e.keyCode] = true;
        // left
        if (keys[37]) {
            if (key !== 'right') {
                key = 'left';
            }
        }
        // right
        if (keys[39]) {
            if (key !== 'left') {
                key = 'right';
            }
        }
        // down
        if (keys[38]) {
            if (key !== 'up') {
                key = 'down';
            }
        }
        // up
        if (keys[40]) {
            if (key !== 'down') {
                key = 'up';
            }
        }
        // e.preventDefault(); //only when you want to move aslant
    }

    function keysReleased(e) {
        // mark keys that were released
        keys[e.keyCode] = false;
	}
	
	function createFood() {
        foodx = foodArrayWidth[Math.floor(Math.random() * foodArrayWidth.length)];
        foody = foodArrayHeight[Math.floor(Math.random() * foodArrayHeight.length)];

        snakeFoodxOne = foodFirstPoint + foodx;
        snakeFoodxTwo = foodSecondPoint + foodx;
        snakeFoodyOne = foodSecondPoint + foody;
        snakeFoodyTwo = foodFirstPoint + foody;

        ctx.beginPath();
        ctx.moveTo(snakeFoodxOne, snakeFoodyTwo);
        ctx.lineTo(snakeFoodxTwo, snakeFoodyTwo);
        ctx.lineTo(snakeFoodxTwo, snakeFoodyOne);
        ctx.lineTo(snakeFoodxOne, snakeFoodyOne);
        ctx.closePath();
    }

	function add(){
		var lastBall = balls[balls.length-1];
		if(key == 'right'){
			balls.push({x:lastBall.x + 50, y:lastBall.y});
		}
		if(key == 'down'){
			balls.push({x:lastBall.x, y:lastBall.y + 50});
		}
		if(key == 'left'){
			balls.push({x:lastBall.x - 50, y:lastBall.y});
		}
		if(key == 'up'){
			balls.push({x:lastBall.x, y:lastBall.y - 50});
		}
	}

	function generateSnake(){
		ctx.clearRect(0, 0, 1300, 800);
		balls.shift(); //delete the last ball
		add();
		
		var lastBall = balls[balls.length - 1];

		if(lastBall.x == snakeFoodxOne && lastBall.y == snakeFoodyTwo){
			score += 5;
			add();
			createFood();
		}

		for(var i = 0; i < balls.length; i++){
			ball = balls[i];

			if(i == balls.length - 1){
				ctx.fillStyle = "maroon";
			} else{
				ctx.fillStyle = "green";
			}
			
			changeWall();

			if(ball.x == lastBall.x && ball.y == lastBall.y && i < balls.length - 2){
				alert("Game Over! Your Score Is :" + score);
				init();
			}

			ctx.fillRect(ball.x, ball.y, 49, 49);
		}
		ctx.fillRect(snakeFoodxOne, snakeFoodyTwo, 49, 49);
	}

	function changeWall() {
		var wall = document.getElementById('walls').value;
	console.log(wall);
		if (wall == true) {
			if(ball.x > 1300){
				ball.x = 0;
			}
			if(ball.x < 0){
				ball.x = 1300;
			}
			if(ball.y > 800){
				ball.y = 0;
			}
			if(ball.y < 0){
				ball.y = 800;
			}
		} else {
			if(ball.x > 1300){
				alert("Game Over! Your Score Is :" + score);
				init();
			}
			if(ball.x < 0){
				alert("Game Over! Your Score Is :" + score);
				init();
			}
			if(ball.y > 800){
				alert("Game Over! Your Score Is :" + score);
				init();
			}
			if(ball.y < 0){
				alert("Game Over! Your Score Is :" + score);
				init();
			}
		}
	}

	// 	// document.getElementById('startBtn').onclick = function() {
	// // 	start = true;
	// // 	init();
	// // 	start();
	// // }
	// // var gSpeed = setInterval(generateSnake, 300);
		
	// // 	function changeSpeed(){
	// // 		var tspeed = document.getElementById("speed");
	// // 		var speed = tspeed.options[tspeed.selectedIndex].value;
	
	// // 		clearInterval(gSpeed);
	// // 		gSpeed = setInterval(generateSnake, speed);
	// // 	}
	
	
	// // window.onload = function() {
		
	// // 	var yourSpeed = document.getElementById('speed');
	// // 	yourSpeed.addEventListener("change", function() {
	// // 		var kmh = yourSpeed.value;
	// // 	console.log(kmh);
	// // 	console.log('kmh');
	// // 	});

	// // 	var wall = document.getElementById('walls');
	// // 	wall.addEventListener("change", function() {
	// // 		var wallHit = wall.value;
	// // 	console.log(wallHit);
	// // 	console.log('kmh');
	// // 	});
	// // }

	// // function start() {
	// 	var snake = setInterval(generateSnake, 300);
	// // }

	// var gSpeed = setInterval(generateSnake, 300);
	
	// function changeSpeed(){
	// 	var tspeed = document.getElementById("speed");
	// 	var speed = tspeed.options[tspeed.selectedIndex].value;

	// 	clearInterval(gSpeed);
	// 	gSpeed = setInterval(generateSnake, speed);
	// }

	setInterval(generateSnake, speed);



</script>
</body>
</html>